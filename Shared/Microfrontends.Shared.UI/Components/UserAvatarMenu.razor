@inject NavigationManager Nav
@inject Microfrontends.Shared.Core.Auth.IAuthClient Auth

<div class="flex-shrink-0 dropdown float-end mr-2">
    <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser2"
        data-bs-toggle="dropdown" aria-expanded="false">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(9).webp" alt="mdo" width="32" height="32"
            class="rounded-circle">
    </a>
    <ul class="dropdown-menu dropdown-menu-right text-small shadow" aria-labelledby="dropdownUser2">
        <li><a class="dropdown-item" href="#">Settings</a></li>
        <li><a class="dropdown-item" href="#">Profile</a></li>
        <li>
            <hr class="dropdown-divider">
        </li>
        @if (_isAuthenticated)
        {
            <li><a class="dropdown-item" href="#" @onclick="Logout">Sign out</a></li>
        }
        else
        {
            <li><a class="dropdown-item" href="#" @onclick="Login">Sign in</a></li>
        }
    </ul>
</div>


@code {

    private bool _isAuthenticated = false;

    protected override async Task OnInitializedAsync()
    {
        // Here you would typically check the authentication state from a service
        // For demonstration, we'll just set it to false
        _isAuthenticated = await Auth.IsAuthenticatedAsync();
    }


    void Login()
    => Nav.NavigateTo("/auth/login", forceLoad: true);

    async Task Logout()
    {
        Nav.NavigateTo("/auth/logout", forceLoad: true);
    }
}